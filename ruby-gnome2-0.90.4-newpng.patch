--- ruby-gnome2-all-0.90.4/libart/extconf.rb.newpng	2010-09-25 17:26:28.000000000 +0900
+++ ruby-gnome2-all-0.90.4/libart/extconf.rb	2011-11-20 03:23:46.000000000 +0900
@@ -29,7 +29,7 @@
 PKGConfig.have_package(package_id) or exit 1
 
 $libs += " -lz "
-PKGConfig.have_package('libpng12') or have_header("png.h") or exit 1
+PKGConfig.have_package('libpng15') or PKGConfig.have_package('libpng12') or have_header("png.h") or exit 1
 have_header("jpeglib.h") or exit 1
 
 have_library("png", "png_create_write_struct")
--- ruby-gnome2-all-0.90.4/libart/src/rbart_canvas.c.newpng	2007-10-23 21:51:27.000000000 +0900
+++ ruby-gnome2-all-0.90.4/libart/src/rbart_canvas.c	2011-11-20 03:31:51.000000000 +0900
@@ -15,6 +15,7 @@
 
 #include <jpeglib.h>
 #include <png.h>
+#include <zlib.h>
 
 #define ART_CANVAS_PNG_INTERLACE_ADAM7 1
 #define ART_CANVAS_ALPHA_MASK 2
@@ -352,7 +353,7 @@
         return Qnil;
     }
 
-    if (setjmp(png_ptr->jmpbuf))
+    if (setjmp(png_jmpbuf(png_ptr)))
     {
         png_destroy_write_struct(&png_ptr, &info_ptr);
         return Qnil;
